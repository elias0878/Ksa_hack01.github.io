<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جامع البيانات المتقدم</title>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --danger: #e74c3c;
            --dark: #2c3e50;
            --light: #ecf0f1;
        }

        body {
            font-family: 'Tahoma', sans-serif;
            background: var(--dark);
            color: var(--light);
            line-height: 1.8;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #34495e;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
        }

        .data-section {
            margin: 30px 0;
            padding: 25px;
            background: #2c3e50;
            border-radius: 12px;
            border-left: 5px solid var(--primary);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .data-card {
            background: #3b4a5e;
            padding: 20px;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        button {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            margin: 15px;
            transition: all 0.3s;
        }

        button.danger {
            background: var(--danger);
        }

        .warning {
            background: #c0392b;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="warning">
            ⚠️ تنبيه: هذا المشروع لأغراض تعليمية فقط
        </div>

        <button onclick="startDataCollection()">بدء جمع البيانات</button>
        <button class="danger" onclick="clearData()">مسح البيانات</button>

        <div class="data-section">
            <h2>🖥️ معلومات النظام</h2>
            <div class="grid" id="systemInfo"></div>
        </div>

        <div class="data-section">
            <h2>🌐 بيانات الشبكة</h2>
            <div class="grid" id="networkInfo"></div>
        </div>

        <div class="data-section">
            <h2>🔐 البيانات الحساسة</h2>
            <div class="grid" id="sensitiveData"></div>
        </div>
    </div>

    <script>
        async function startDataCollection() {
            try {
                const data = await collectAllData();
                displayData(data);
            } catch (error) {
                showError('خطأ في جمع البيانات: ' + error.message);
            }
        }

        async function collectAllData() {
            return {
                system: getSystemInfo(),
                network: await getNetworkInfo(),
                sensitive: getSensitiveData(),
                hardware: await getHardwareData(),
                advanced: getAdvancedData()
            };
        }

        function getSystemInfo() {
            return {
                'نظام التشغيل': navigator.platform,
                'المتصفح': navigator.userAgent,
                'اللغة': navigator.language,
                'الذاكرة': navigator.deviceMemory + ' GB',
                'الأنوية': navigator.hardwareConcurrency,
                'الدقة': `${screen.width}x${screen.height}`,
                'المنطقة الزمنية': Intl.DateTimeFormat().resolvedOptions().timeZone
            };
        }

        async function getNetworkInfo() {
            try {
                const ip = await fetch('https://api.ipify.org?format=json').then(r => r.json());
                const connection = navigator.connection || {};
                return {
                    'عنوان IP': ip.ip,
                    'نوع الاتصال': connection.effectiveType || 'غير معروف',
                    'السرعة': connection.downlink + ' Mbps',
                    'وقت الاستجابة': connection.rtt + ' ms'
                };
            } catch {
                return {'خطأ': 'لا يمكن الوصول لبيانات الشبكة'};
            }
        }

        function getSensitiveData() {
            const cookies = parseCookies();
            return {
                'الكوكيز': Object.keys(cookies).length + ' ملفات',
                'الإيميلات': extractEmails(cookies),
                'الهواتف': extractPhones(cookies)
            };
        }

        function parseCookies() {
            return document.cookie.split(';').reduce((acc, cookie) => {
                const [k, v] = cookie.split('=').map(s => s.trim());
                acc[k] = decodeURIComponent(v);
                return acc;
            }, {});
        }

        function extractEmails(cookies) {
            const emailPattern = /\b[\w.-]+@[\w.-]+\.\w{2,}\b/gi;
            const emails = new Set();
            Object.values(cookies).forEach(v => {
                const matches = v.match(emailPattern);
                if (matches) matches.forEach(e => emails.add(e));
            });
            return Array.from(emails).join(', ') || 'غير موجود';
        }

        function extractPhones(cookies) {
            const phonePattern = /\b(?:\+?966|0)?5[0-9]{8}\b/g;
            const phones = new Set();
            Object.values(cookies).forEach(v => {
                const matches = v.match(phonePattern);
                if (matches) matches.forEach(p => phones.add(p));
            });
            return Array.from(phones).join(', ') || 'غير موجود';
        }

        function displayData(data) {
            displaySection('systemInfo', data.system);
            displaySection('networkInfo', data.network);
            displaySection('sensitiveData', data.sensitive);
        }

        function displaySection(containerId, data) {
            const container = document.getElementById(containerId);
            container.innerHTML = Object.entries(data)
                .map(([k, v]) => `
                    <div class="data-card">
                        <strong>${k}:</strong> 
                        <span>${v}</span>
                    </div>
                `).join('');
        }

        function clearData() {
            document.cookie.split(';').forEach(cookie => {
                const [name] = cookie.split('=');
                document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
            });
            location.reload();
        }

        function showError(msg) {
            const warning = document.querySelector('.warning');
            warning.textContent = msg;
            warning.style.backgroundColor = '#e74c3c';
        }
    </script>
</body>
</html>
